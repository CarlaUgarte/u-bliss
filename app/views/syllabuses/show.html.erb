<h1 class="text-center my-4"><%= @syllabus.title %></h1>
<!--poner el nombre del mentor -->

<div class="container">
  <!-- Información general del Syllabus -->
  <div class="mb-4">
    <h2>Detalles del Curso</h2>
    <p><%= @syllabus.description %></p>
    <p><strong>Categoría:</strong> <%= @syllabus.category.name %></p>
  </div>

  <!-- Módulos del curso -->
  <div>
    <h2>Módulos</h2>
    <div class="accordion" id="modulesAccordion">
      <% @syllabus.syllabus_modules.each_with_index do |modulo, index| %>
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading<%= index %>">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= index %>" aria-expanded="<%= index.zero? %>" aria-controls="collapse<%= index %>">
              <%= modulo.name %>
            </button>
          </h2>
          <div id="collapse<%= index %>" class="accordion-collapse collapse <%= 'show' if index.zero? %>" aria-labelledby="heading<%= index %>" data-bs-parent="#modulesAccordion">
            <div class="accordion-body">
              <% if modulo.lectures.any? %>
                <ul class="list-group">
                  <% modulo.lectures.each do |lecture| %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <!-- Casilla de marcado con estilo contrastante -->
                      <%= check_box_tag "lecture_#{lecture.id}_completed", true, session[:completed_lectures]&.include?(lecture.id), class: 'form-check-input me-2 mark-completed', data: { lecture_id: lecture.id } %>
                      <!-- Título de la lección justo después de la casilla -->
                      <span class="flex-grow-1"><%= lecture.details.truncate(50) %></span>
                      <!-- Botón 'Ver Lección' a la derecha -->
                      <%= link_to 'Comentarios', lecture_comments_path(lecture), class: 'btn btn-primary btn-sm' %>
                    </li>
                  <% end %>
                </ul>
              <% else %>
                <p>No hay lecciones en este módulo.</p>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <!-- Botón 'Agregar a mi biblioteca' justo debajo del título principal -->
<div class="text-center mb-4">
  <%= button_to 'Agregar a mi biblioteca', libraries_path(@syllabus), method: :post, class: 'btn btn-primary btn-lg' %>
  <%= button_to "Agregar", syllabus_libraries_path(@syllabus), method: :post, class: 'btn btn-primary btn-lg' %>
</div>
</div>

<!-- Estilos para las casillas de verificación -->
<style>
  .form-check-input {
    width: 25px;
    height: 25px;
    border: 2px solid #007bff;
    background-color: #fff;
    accent-color: #007bff; /* Cambia el color de la casilla cuando está marcada */
    transition: background-color 0.2s, border-color 0.2s;
  }

  .form-check-input:checked {
    background-color: #007bff; /* Color de fondo cuando está marcado */
    border-color: #0056b3;
  }

  .form-check-input:focus {
    outline: none;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
  }

  .form-check-label {
    font-size: 16px;
  }
</style>
